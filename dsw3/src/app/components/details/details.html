<div class="container mt-4">
  <h2>Detalhes da ação: {{ ticker }}</h2>

  @if (loading) {
    <div class="text-center mt-4">
      <div class="spinner-border text-primary" role="status"></div>
      <p>Carregando dados…</p>
    </div>
  } @else if (chartData?.datasets?.length) {
    <div>
      <canvas
        baseChart
        [data]="chartData"
        [options]="chartOptions"
        [type]="chartType">
      </canvas>

      <hr class="my-4">

      <div class="row text-center">
        <div class="col-md-3 mb-3">
          <h6 class="text-muted">Último fechamento</h6>
          <p class="fw-bold">${{ lastClose?.toFixed(2) }}</p>
        </div>
        <div class="col-md-3 mb-3">
          <h6 class="text-muted">Menor preço</h6>
          <p class="fw-bold text-danger">${{ minPrice?.toFixed(2) }}</p>
        </div>
        <div class="col-md-3 mb-3">
          <h6 class="text-muted">Maior preço</h6>
          <p class="fw-bold text-success">${{ maxPrice?.toFixed(2) }}</p>
        </div>
        <div class="col-md-3 mb-3">
          <h6 class="text-muted">Variação 30 dias</h6>
          <p class="fw-bold"
             [ngClass]="variation! >= 0 ? 'text-success' : 'text-danger'">
            {{ variation! >= 0 ? '+' : '' }}{{ variation?.toFixed(2) }}%
          </p>
        </div>
      </div>
      <div class="text-center mt-4">
        <a routerLink="/home" class="btn btn-outline-secondary px-4">
          ← Voltar
        </a>
      </div>
    </div>
  } @else {
    <p>Sem dados disponíveis.</p>
  }
</div>
